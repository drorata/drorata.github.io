<!doctype html>
<html lang="en">

<head>
  <!-- Required meta tags -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">


  <title>Custom Enums and tests | Dr. Dror
</title>
  <link rel="canonical" href="../../../../../posts/2018/Nov/22/custom-enums-and-tests/index.html">


  <link rel="stylesheet" href="../../../../../theme/css/bootstrap.min.css">
  <link rel="stylesheet" href="../../../../../theme/css/fontawesome.min.css">
  <link rel="stylesheet" href="../../../../../theme/css/pygments/default.min.css">
  <link rel="stylesheet" href="../../../../../theme/css/theme.css">


<meta name="description" content="Somehow advanced usage of python's enums. Including a discussion on testing of those custom entities.">
  <!-- Global site tag (gtag.js) - Google Analytics --> 
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-WH47T9F1TR"></script> 
  <script> 
    window.dataLayer = window.dataLayer || []; 
    function gtag(){dataLayer.push(arguments);} 
    gtag('js', new Date()); 

    gtag('config', 'G-WH47T9F1TR'); 
  </script>


</head>

<body>
  <header class="header">
    <div class="container">
<div class="row">
    <div class="col-sm-4">
      <a href="../../../../../">
        <img class="img-fluid rounded" src=../../../../../images/colored-spiral-of-roots.png width=90 height=90 alt="Dr. Dror">
      </a>
    </div>
  <div class="col-sm-8">
    <h1 class="title"><a href="../../../../../">Dr. Dror</a></h1>
      <p class="text-muted">Foo is not just a "Bar"</p>
      <ul class="list-inline">
            <li class="list-inline-item"><a href="../../../../../pages/about.html">About</a></li>
              <li class="list-inline-item text-muted">/</li>
            <li class="list-inline-item"><a href="../../../../../pages/random-work.html">Random work</a></li>
            <li class=" list-inline-item text-muted">|</li>
          <li class="list-inline-item"><a class="fab fa-github" href="https://github.com/drorata" target="_blank"></a></li>
          <li class="list-inline-item"><a class="fab fa-linkedin" href="https://www.linkedin.com/in/atariah" target="_blank"></a></li>
      </ul>
  </div>
</div>    </div>
  </header>

  <div class="main">
    <div class="container">
      <h1>  Custom Enums and tests
</h1>
      <hr>
<article class="article">
  <header>
    <ul class="list-inline">
      <li class="list-inline-item text-muted" title="2018-11-22T00:00:00+01:00">
        <i class="fas fa-clock"></i>
        Thu 22 November 2018
      </li>
      <li class="list-inline-item">
        <i class="fas fa-folder-open"></i>
        <a href="../../../../../category/general.html">General</a>
      </li>
      <li class="list-inline-item">
        <i class="fas fa-tag"></i>
        <a href="../../../../../tag/python.html">#python</a>,         <a href="../../../../../tag/superuser.html">#superuser</a>      </li>
    </ul>
  </header>
  <div class="content">
    <p>(Original notebook can be found in <a href="https://gist.github.com/drorata/ab47b78dc5ad5cf681909b054ea51c4c">this gist</a>)</p>
<h2 id="motivation">Motivation</h2>
<p>Assume you want to share across your application a smart list of constants.
For example, a list of colors supported by your application.
One way probably could be a <code>list</code> in some module along with some replated logic implemented.
In this post, you will learn how I tackled this issue.</p>
<h2 id="enums-in-python">Enums in Python</h2>
<p>There are a lot of resources about Enums in Python and probably the best place to start are the <a href="https://docs.python.org/3/library/enum.html">docs</a>.
Let us start with a simple example.</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">enum</span> <span class="kn">import</span> <span class="n">Enum</span>
<span class="k">class</span> <span class="nc">Color</span><span class="p">(</span><span class="n">Enum</span><span class="p">):</span>
    <span class="n">RED</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="n">GREEN</span> <span class="o">=</span> <span class="mi">2</span>
    <span class="n">BLUE</span> <span class="o">=</span> <span class="mi">3</span>
</code></pre></div>

<p>This is great; you can check the value of <code>RED</code>:</p>
<div class="highlight"><pre><span></span><code><span class="n">Color</span><span class="o">.</span><span class="n">RED</span>
</code></pre></div>

<div class="highlight"><pre><span></span><code>&lt;Color.RED: 1&gt;
</code></pre></div>

<p>Recall, that the objective is to come up with a solution enabling a little more logic.
In particular, you want to have two functionalities:</p>
<ol>
<li>Nice printout of the supported colors</li>
<li>Checking whether a given color is supported</li>
</ol>
<h2 id="customizing-color">Customizing <code>Color</code></h2>
<p>Here is the definition of the customized class.</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">enum</span> <span class="kn">import</span> <span class="n">EnumMeta</span>


<span class="k">class</span> <span class="nc">MyEnumMeta</span><span class="p">(</span><span class="n">EnumMeta</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
        <span class="n">lines</span> <span class="o">=</span> <span class="p">[</span><span class="sa">f</span><span class="s2">&quot;Members of `</span><span class="si">{</span><span class="bp">cls</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">` are:&quot;</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">member</span> <span class="ow">in</span> <span class="bp">cls</span><span class="p">:</span>
            <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;- </span><span class="si">{</span><span class="n">member</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">lines</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_contains</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">member</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">member</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_member_map_</span> \
            <span class="ow">or</span> <span class="n">member</span> <span class="ow">in</span> <span class="nb">set</span><span class="p">(</span>
                <span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_member_map_</span><span class="o">.</span><span class="n">values</span><span class="p">()))</span>

    <span class="k">def</span> <span class="nf">is_valid</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">member</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_contains</span><span class="p">(</span><span class="n">member</span><span class="p">):</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>


<span class="k">class</span> <span class="nc">Color</span><span class="p">(</span><span class="n">Enum</span><span class="p">,</span> <span class="n">metaclass</span><span class="o">=</span><span class="n">MyEnumMeta</span><span class="p">):</span>
    <span class="n">RED</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="n">GREEN</span> <span class="o">=</span> <span class="mi">2</span>
    <span class="n">BLUE</span> <span class="o">=</span> <span class="mi">3</span>
</code></pre></div>

<p>Now, your <code>Color</code> can do much more:</p>
<div class="highlight"><pre><span></span><code><span class="nb">print</span><span class="p">(</span><span class="n">Color</span><span class="p">)</span>
</code></pre></div>

<div class="highlight"><pre><span></span><code><span class="n">Members</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="n n-Quoted">`Color`</span><span class="w"> </span><span class="n">are</span><span class="o">:</span>
<span class="o">-</span><span class="w"> </span><span class="n">Color</span><span class="p">.</span><span class="n">RED</span>
<span class="o">-</span><span class="w"> </span><span class="n">Color</span><span class="p">.</span><span class="n">GREEN</span>
<span class="o">-</span><span class="w"> </span><span class="n">Color</span><span class="p">.</span><span class="n">BLUE</span>
</code></pre></div>

<p>or, alternatively:</p>
<div class="highlight"><pre><span></span><code><span class="n">Color</span><span class="o">.</span><span class="n">is_valid</span><span class="p">(</span><span class="s1">&#39;RED&#39;</span><span class="p">),</span> <span class="n">Color</span><span class="o">.</span><span class="n">is_valid</span><span class="p">(</span><span class="s1">&#39;YELLOW&#39;</span><span class="p">)</span>
</code></pre></div>

<div class="highlight"><pre><span></span><code>(True, False)
</code></pre></div>

<p>I am sure you can take it from here, improve and modify the implementation as per your needs.
But, before doing so, you might want to see how the custom <code>Color</code> can be used, and, more importantly, tested.</p>
<h2 id="using-the-custom-color">Using the custom <code>Color</code></h2>
<p>Here is an example of how we can use the custom <code>Color</code>:</p>
<div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">foo</span><span class="p">(</span><span class="nb">type</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">Color</span><span class="o">.</span><span class="n">is_valid</span><span class="p">(</span><span class="nb">type</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Wonderful! we will use the wonderful </span><span class="si">{</span><span class="nb">type</span><span class="si">}</span><span class="s2"> color&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="s2">&quot;valid&quot;</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="nb">type</span><span class="si">}</span><span class="s2"> is not supported color. The supported colors are:</span><span class="se">\n</span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">Color</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="s2">&quot;invalid&quot;</span>
</code></pre></div>

<p>And here are some examples:</p>
<div class="highlight"><pre><span></span><code><span class="n">foo</span><span class="p">(</span><span class="s1">&#39;RED&#39;</span><span class="p">)</span>
</code></pre></div>

<div class="highlight"><pre><span></span><code>Wonderful! we will use the wonderful RED color





&#39;valid&#39;
</code></pre></div>

<div class="highlight"><pre><span></span><code><span class="n">foo</span><span class="p">(</span><span class="s1">&#39;BLUE&#39;</span><span class="p">)</span>
</code></pre></div>

<div class="highlight"><pre><span></span><code>Wonderful! we will use the wonderful BLUE color





&#39;valid&#39;
</code></pre></div>

<div class="highlight"><pre><span></span><code><span class="n">foo</span><span class="p">(</span><span class="s1">&#39;YELLOW&#39;</span><span class="p">)</span>
</code></pre></div>

<div class="highlight"><pre><span></span><code><span class="n">YELLOW</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="n">supported</span><span class="w"> </span><span class="n">color</span><span class="p">.</span><span class="w"> </span><span class="n">The</span><span class="w"> </span><span class="n">supported</span><span class="w"> </span><span class="n">colors</span><span class="w"> </span><span class="n">are</span><span class="o">:</span>
<span class="n">Members</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="n n-Quoted">`Color`</span><span class="w"> </span><span class="n">are</span><span class="o">:</span>
<span class="o">-</span><span class="w"> </span><span class="n">Color</span><span class="p">.</span><span class="n">RED</span>
<span class="o">-</span><span class="w"> </span><span class="n">Color</span><span class="p">.</span><span class="n">GREEN</span>
<span class="o">-</span><span class="w"> </span><span class="n">Color</span><span class="p">.</span><span class="n">BLUE</span>





<span class="s1">&#39;invalid&#39;</span>
</code></pre></div>

<h2 id="testing-foo">Testing <code>foo</code></h2>
<p>Next, you want to test <code>foo</code>.
But, as you want it to be a proper unit test, you don't want to refer to the values of <code>Color</code>.
That is, you want to patch <code>Color</code> and use some value defined within the scope of the test.
Here is the way to do that.</p>
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">unittest</span>
<span class="kn">from</span> <span class="nn">unittest.mock</span> <span class="kn">import</span> <span class="n">patch</span>


<span class="k">class</span> <span class="nc">DummyColor</span><span class="p">(</span><span class="n">Enum</span><span class="p">,</span> <span class="n">metaclass</span><span class="o">=</span><span class="n">MyEnumMeta</span><span class="p">):</span>
    <span class="n">TEST_TYPE1</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="n">TEST_TYPE2</span> <span class="o">=</span> <span class="mi">10</span>


<span class="k">class</span> <span class="nc">MyTest</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">test_a</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># Without any patch, you are depending on the</span>
        <span class="c1"># values of `Color`</span>
        <span class="k">assert</span> <span class="n">foo</span><span class="p">(</span><span class="s1">&#39;RED&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="s1">&#39;valid&#39;</span>
        <span class="k">assert</span> <span class="n">foo</span><span class="p">(</span><span class="s1">&#39;YELLOW&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="s1">&#39;invalid&#39;</span>

    <span class="nd">@patch</span><span class="p">(</span><span class="s1">&#39;__main__.Color&#39;</span><span class="p">,</span> <span class="n">DummyColor</span><span class="p">)</span>  <span class="c1"># Make sure you patch the right `Color`</span>
                                          <span class="c1"># it should be within the class you want to test</span>
    <span class="k">def</span> <span class="nf">test_b</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">assert</span> <span class="n">foo</span><span class="p">(</span><span class="s1">&#39;TEST_TYPE1&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="s1">&#39;valid&#39;</span>
        <span class="k">assert</span> <span class="n">foo</span><span class="p">(</span><span class="s1">&#39;TEST_TYPE10&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="s1">&#39;invalid&#39;</span>
</code></pre></div>

<div class="highlight"><pre><span></span><code><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">unittest</span><span class="o">.</span><span class="n">main</span><span class="p">(</span><span class="n">argv</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;first-arg-is-ignored&#39;</span><span class="p">],</span> <span class="n">exit</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</code></pre></div>

<div class="highlight"><pre><span></span><code><span class="p">..</span>

<span class="n">Wonderful</span><span class="o">!</span><span class="w"> </span><span class="n">we</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="k">use</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">wonderful</span><span class="w"> </span><span class="n">RED</span><span class="w"> </span><span class="n">color</span>
<span class="n">YELLOW</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="n">supported</span><span class="w"> </span><span class="n">color</span><span class="p">.</span><span class="w"> </span><span class="n">The</span><span class="w"> </span><span class="n">supported</span><span class="w"> </span><span class="n">colors</span><span class="w"> </span><span class="n">are</span><span class="o">:</span>
<span class="n">Members</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="n n-Quoted">`Color`</span><span class="w"> </span><span class="n">are</span><span class="o">:</span>
<span class="o">-</span><span class="w"> </span><span class="n">Color</span><span class="p">.</span><span class="n">RED</span>
<span class="o">-</span><span class="w"> </span><span class="n">Color</span><span class="p">.</span><span class="n">GREEN</span>
<span class="o">-</span><span class="w"> </span><span class="n">Color</span><span class="p">.</span><span class="n">BLUE</span>
<span class="n">Wonderful</span><span class="o">!</span><span class="w"> </span><span class="n">we</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="k">use</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">wonderful</span><span class="w"> </span><span class="n">TEST_TYPE1</span><span class="w"> </span><span class="n">color</span>
<span class="n">TEST_TYPE10</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="n">supported</span><span class="w"> </span><span class="n">color</span><span class="p">.</span><span class="w"> </span><span class="n">The</span><span class="w"> </span><span class="n">supported</span><span class="w"> </span><span class="n">colors</span><span class="w"> </span><span class="n">are</span><span class="o">:</span>
<span class="n">Members</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="n n-Quoted">`DummyColor`</span><span class="w"> </span><span class="n">are</span><span class="o">:</span>
<span class="o">-</span><span class="w"> </span><span class="n">DummyColor</span><span class="p">.</span><span class="n">TEST_TYPE1</span>
<span class="o">-</span><span class="w"> </span><span class="n">DummyColor</span><span class="p">.</span><span class="n">TEST_TYPE2</span>



<span class="o">----------------------------------------------------------------------</span>
<span class="n">Ran</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="n">tests</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="mf">0.002</span><span class="n">s</span>

<span class="n">OK</span>
</code></pre></div>

<h2 id="summary">Summary</h2>
<p>I hope you found it useful.
As a bonus, here is more or less the same example, given in scripts.
You can save the three of theme somewhere and run <code>pytest</code> to see how everything works together.</p>
<h3 id="special_enumpy"><code>special_enum.py</code></h3>
<div class="highlight"><pre><span></span><code><span class="c1"># Implementation of the customized enum</span>
<span class="kn">from</span> <span class="nn">enum</span> <span class="kn">import</span> <span class="n">Enum</span><span class="p">,</span> <span class="n">EnumMeta</span>


<span class="k">class</span> <span class="nc">MyEnumMeta</span><span class="p">(</span><span class="n">EnumMeta</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
        <span class="n">lines</span> <span class="o">=</span> <span class="p">[</span><span class="sa">f</span><span class="s2">&quot;Members of `</span><span class="si">{</span><span class="bp">cls</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">` are:&quot;</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">member</span> <span class="ow">in</span> <span class="bp">cls</span><span class="p">:</span>
            <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;- </span><span class="si">{</span><span class="n">member</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">lines</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_contains</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">member</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">member</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_member_map_</span> \
            <span class="ow">or</span> <span class="n">member</span> <span class="ow">in</span> <span class="nb">set</span><span class="p">(</span>
                <span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_member_map_</span><span class="o">.</span><span class="n">values</span><span class="p">()))</span>

    <span class="k">def</span> <span class="nf">is_valid</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">member</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_contains</span><span class="p">(</span><span class="n">member</span><span class="p">):</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>


<span class="k">class</span> <span class="nc">SpecialEnum</span><span class="p">(</span><span class="n">Enum</span><span class="p">,</span> <span class="n">metaclass</span><span class="o">=</span><span class="n">MyEnumMeta</span><span class="p">):</span>
    <span class="n">TYPE1</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="n">TYPE2</span> <span class="o">=</span> <span class="mi">10</span>
</code></pre></div>

<h3 id="foopy"><code>foo.py</code></h3>
<div class="highlight"><pre><span></span><code><span class="c1"># Your amazing logic!</span>
<span class="kn">from</span> <span class="nn">special_enum</span> <span class="kn">import</span> <span class="n">SpecialEnum</span>


<span class="k">def</span> <span class="nf">bar</span><span class="p">(</span><span class="nb">type</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">SpecialEnum</span><span class="p">)</span>  <span class="c1"># Just for debugging</span>
    <span class="k">if</span> <span class="n">SpecialEnum</span><span class="o">.</span><span class="n">is_valid</span><span class="p">(</span><span class="nb">type</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;valid&quot;</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="s2">&quot;invalid&quot;</span>
</code></pre></div>

<h3 id="test_foopy"><code>test_foo.py</code></h3>
<div class="highlight"><pre><span></span><code><span class="c1"># The testing script</span>
<span class="kn">import</span> <span class="nn">unittest</span>
<span class="kn">from</span> <span class="nn">unittest.mock</span> <span class="kn">import</span> <span class="n">patch</span>
<span class="kn">import</span> <span class="nn">foo</span>
<span class="kn">from</span> <span class="nn">special_enum</span> <span class="kn">import</span> <span class="n">MyEnumMeta</span>
<span class="kn">from</span> <span class="nn">enum</span> <span class="kn">import</span> <span class="n">Enum</span>


<span class="k">class</span> <span class="nc">SpecialEnumTest</span><span class="p">(</span><span class="n">Enum</span><span class="p">,</span> <span class="n">metaclass</span><span class="o">=</span><span class="n">MyEnumMeta</span><span class="p">):</span>
    <span class="n">TEST_TYPE1</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="n">TEST_TYPE2</span> <span class="o">=</span> <span class="mi">10</span>


<span class="k">class</span> <span class="nc">MyTest</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">test_a</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># Passes as it is ussing the original SpecialEnum</span>
        <span class="k">assert</span> <span class="n">foo</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="s1">&#39;TYPE1&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="s1">&#39;valid&#39;</span>
        <span class="k">assert</span> <span class="n">foo</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="s1">&#39;TYPE10&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="s1">&#39;invalid&#39;</span>

    <span class="nd">@patch</span><span class="p">(</span><span class="s1">&#39;foo.SpecialEnum&#39;</span><span class="p">,</span> <span class="n">SpecialEnumTest</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">test_b</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">assert</span> <span class="n">foo</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="s1">&#39;TEST_TYPE1&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="s1">&#39;valid&#39;</span>
        <span class="k">assert</span> <span class="n">foo</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="s1">&#39;TEST_TYPE10&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="s1">&#39;invalid&#39;</span>
</code></pre></div>
  </div>
</article>
  <hr>
  <div id="disqus_thread"></div>
  <script>
    var disqus_config = function() {
      this.page.url = '../../../../../posts/2018/Nov/22/custom-enums-and-tests/index.html';
      this.page.identifier = 'custom-enums-and-tests';
    };
    (function() {
      var d = document;
      var s = d.createElement('script');
      s.src = '//dr-dror.disqus.com/embed.js';
      s.setAttribute('data-timestamp', +new Date());
      (d.head || d.body).appendChild(s);
    })();
  </script>
  <noscript class="text-muted">
    Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a>
  </noscript>
    </div>
  </div>

  <footer class="footer">
    <div class="container">
<div class="row">
  <ul class="col-sm-6 list-inline">
    <li class="list-inline-item"><a href="../../../../../archives.html">Archives</a></li>
    <li class="list-inline-item"><a href="../../../../../categories.html">Categories</a></li>
      <li class="list-inline-item"><a href="../../../../../tags.html">Tags</a></li>
  </ul>
  <p class="col-sm-6 text-sm-right text-muted">
    Generated by <a href="https://github.com/getpelican/pelican" target="_blank">Pelican</a>
    / <a href="https://github.com/nairobilug/pelican-alchemy" target="_blank">&#x2728;</a>
  </p>
</div>    </div>
  </footer>

</body>

</html>